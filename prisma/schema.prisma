// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model UserQuery {
  id         Int        @id @default(autoincrement())
  userId     Int?       @map("user_id") // optional, if you want to track users
  query      String
  aiResponse Json       @map("ai_response") // store the entire AI-generated response and sources as JSON
  timestamp  DateTime   @default(now()) @map("timestamp")
  feedback   Feedback[]

  @@map("user_queries")
}

model Feedback {
  id        Int       @id @default(autoincrement())
  userId    Int?      @map("user_id") // optional, if you want to track users
  queryId   Int       @map("query_id")
  helpful   Boolean
  timestamp DateTime  @default(now()) @map("timestamp")
  userQuery UserQuery @relation(fields: [queryId], references: [id])

  @@map("feedback")
}
